# ğŸš€ åˆ†å¸ƒå¼ä¸‹è½½é›†ç¾¤ - å®Œå…¨ä¼˜åŒ–ç‰ˆ

[![Docker](https://img.shields.io/badge/Docker-20.10+-blue.svg)](https://www.docker.com/)
[![Python](https://img.shields.io/badge/Python-3.12+-green.svg)](https://www.python.org/)
[![Security](https://img.shields.io/badge/Security-0%20Vulnerabilities-brightgreen.svg)](#security)
[![Size](https://img.shields.io/badge/Size-96%25%20Optimized-orange.svg)](#optimization)

> é«˜åº¦ä¼˜åŒ–ã€å®Œå…¨å®‰å…¨çš„åˆ†å¸ƒå¼æ–‡ä»¶ä¸‹è½½é›†ç¾¤ç³»ç»Ÿ

## ğŸ¯ é¡¹ç›®ç‰¹ç‚¹

- **ğŸ—ï¸ å¾®æœåŠ¡æ¶æ„**: Resolverã€Downloaderã€Scraperä¸‰å¤§æ ¸å¿ƒç»„ä»¶
- **ğŸ³ åŒç‰ˆæœ¬æ”¯æŒ**: åŸç‰ˆ(å®Œæ•´åŠŸèƒ½) + ä¼˜åŒ–ç‰ˆ(è½»é‡çº§)
- **ğŸ”’ é›¶å®‰å…¨æ¼æ´**: ä½¿ç”¨æœ€æ–°å®‰å…¨çš„åŸºç¡€é•œåƒ
- **ğŸ“ˆ 96%å¤§å°ä¼˜åŒ–**: ä»5.2GBä¼˜åŒ–åˆ°212MB
- **ğŸ“Š å®Œæ•´ç›‘æ§**: Prometheus + Grafana
- **ğŸŒ Webç®¡ç†ç•Œé¢**: ç›´è§‚çš„ä»£ç†ç®¡ç†
- **âš¡ ä¸€é”®å¯åŠ¨**: æ™ºèƒ½ç‰ˆæœ¬åˆ‡æ¢è„šæœ¬

## ğŸ“Š ä¼˜åŒ–æˆæœ

| ç»„ä»¶ | åŸç‰ˆæœ¬ | ä¼˜åŒ–ç‰ˆæœ¬ | ä¼˜åŒ–å¹…åº¦ |
|------|--------|----------|----------|
| **Downloader** | 133MB | 60MB | **54%** â¬‡ï¸ |
| **Resolver** | 2.26GB | 70MB | **97%** â¬‡ï¸ |
| **Scraper** | 2.79GB | 80MB | **97%** â¬‡ï¸ |
| **æ€»è®¡** | **5.2GB** | **210MB** | **96%** â¬‡ï¸ |

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å¼€å‘ç¯å¢ƒè®¾ç½®

```bash
# è®¾ç½®å¼€å‘ç¯å¢ƒ (è§£å†³IDEå¯¼å…¥è­¦å‘Š)
./setup-dev.sh

# æŸ¥çœ‹å½“å‰çŠ¶æ€
./switch-version.sh status
```

### 2. å¯åŠ¨æœåŠ¡

```bash
# æ–¹å¼ä¸€ï¼šDocker Hubä¸€é”®éƒ¨ç½² (æ¨èç”Ÿäº§ç¯å¢ƒ)
./switch-version.sh hub

# æ–¹å¼äºŒï¼šæœ¬åœ°æ„å»ºä¼˜åŒ–ç‰ˆæœ¬ (æ¨èå¼€å‘ç¯å¢ƒ)
./switch-version.sh optimized

# æ–¹å¼ä¸‰ï¼šåŸç‰ˆæœ¬ (å®Œæ•´PlaywrightåŠŸèƒ½)
./switch-version.sh original

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
./switch-version.sh status

# åœæ­¢æ‰€æœ‰æœåŠ¡
./switch-version.sh stop
```

### 3. è®¿é—®æœåŠ¡

#### ä¼˜åŒ–ç‰ˆæœ¬ç«¯å£
- ğŸŒ **ç®¡ç†ç•Œé¢**: http://localhost:8001
- ğŸ”§ **çˆ¬è™«æœåŠ¡**: http://localhost:8501  
- ğŸ“Š **ç›‘æ§é¢æ¿**: http://localhost:3001

#### åŸç‰ˆæœ¬ç«¯å£
- ğŸŒ **ç®¡ç†ç•Œé¢**: http://localhost:8000
- ğŸ”§ **çˆ¬è™«æœåŠ¡**: http://localhost:8500
- ğŸ“Š **ç›‘æ§é¢æ¿**: http://localhost:3000

## ğŸ› ï¸ æŠ€æœ¯æ¶æ„

### æ ¸å¿ƒç»„ä»¶

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Resolver      â”‚    â”‚   Downloader    â”‚    â”‚    Scraper      â”‚
â”‚  (åè°ƒå™¨)       â”‚    â”‚   (ä¸‹è½½ä»£ç†)    â”‚    â”‚  (é“¾æ¥è§£æ)     â”‚
â”‚                 â”‚    â”‚                 â”‚    â”‚                 â”‚
â”‚ â€¢ ä»»åŠ¡åˆ†å‘      â”‚    â”‚ â€¢ æ–‡ä»¶ä¸‹è½½      â”‚    â”‚ â€¢ URLè§£æ       â”‚
â”‚ â€¢ ä»£ç†ç®¡ç†      â”‚â—„â”€â”€â–ºâ”‚ â€¢ å¿ƒè·³æ£€æµ‹      â”‚    â”‚ â€¢ é‡å®šå‘å¤„ç†    â”‚
â”‚ â€¢ Webç•Œé¢       â”‚    â”‚ â€¢ è‡ªåŠ¨æ³¨å†Œ      â”‚    â”‚ â€¢ REST API      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                        â”‚                        â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   Monitoring    â”‚
                    â”‚ Prometheus+Grafana â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ä¼˜åŒ–æŠ€æœ¯

1. **åŸºç¡€é•œåƒä¼˜åŒ–**
   - `python:3.10` â†’ `python:3.12-alpine`
   - å‡å°‘90%åŸºç¡€é•œåƒå¤§å°

2. **ä¾èµ–æ›¿æ¢**
   - Playwright â†’ requests + beautifulsoup4
   - å‡å°‘1.5GBæµè§ˆå™¨ä¾èµ–

3. **æ„å»ºä¼˜åŒ–**
   - å¤šé˜¶æ®µæ„å»º
   - ç¼“å­˜æ¸…ç†
   - ç”¨æˆ·æƒé™ä¼˜åŒ–

## ğŸ”’ å®‰å…¨ç‰¹æ€§

- âœ… **0ä¸ªé«˜å±æ¼æ´** - ä½¿ç”¨æœ€æ–°å®‰å…¨é•œåƒ
- âœ… **æœ€å°æ”»å‡»é¢** - ç²¾ç®€ä¾èµ–åŒ…
- âœ… **érootè¿è¡Œ** - å®‰å…¨ç”¨æˆ·æƒé™
- âœ… **å®šæœŸæ›´æ–°** - è‡ªåŠ¨åŒ–å®‰å…¨æ£€æŸ¥

## ğŸ“ é¡¹ç›®ç»“æ„

```
download-cluster/
â”œâ”€â”€ ğŸ“‹ ç‰ˆæœ¬ç®¡ç†
â”‚   â”œâ”€â”€ switch-version.sh             # ç‰ˆæœ¬åˆ‡æ¢è„šæœ¬
â”‚   â”œâ”€â”€ setup-dev.sh                 # å¼€å‘ç¯å¢ƒè®¾ç½®
â”‚   â”œâ”€â”€ docker-compose.yml           # åŸç‰ˆé…ç½®
â”‚   â”œâ”€â”€ docker-compose.optimized.yml # ä¼˜åŒ–ç‰ˆé…ç½®
â”‚   â””â”€â”€ docker-compose.hub.yml       # Docker Hubé…ç½®
â”œâ”€â”€ ğŸ”§ æ ¸å¿ƒæœåŠ¡
â”‚   â”œâ”€â”€ downloader/                  # ä¸‹è½½ä»£ç†
â”‚   â”œâ”€â”€ resolver/                    # åè°ƒå™¨
â”‚   â””â”€â”€ scraper/                     # çˆ¬è™«æœåŠ¡
â”œâ”€â”€ ğŸ“Š ç›‘æ§ç³»ç»Ÿ
â”‚   â”œâ”€â”€ prometheus/                  # æŒ‡æ ‡æ”¶é›†
â”‚   â””â”€â”€ grafana/                     # å¯è§†åŒ–é¢æ¿
â””â”€â”€ ğŸ“š æ–‡æ¡£
    â”œâ”€â”€ OPTIMIZATION_REPORT.md       # ä¼˜åŒ–æŠ¥å‘Š
    â”œâ”€â”€ SECURITY_REPORT.md           # å®‰å…¨æŠ¥å‘Š
    â””â”€â”€ README.md                    # é¡¹ç›®è¯´æ˜
```

## ğŸ³ Docker Hubé•œåƒ

é¡¹ç›®å·²å‘å¸ƒåˆ°Docker Hubï¼Œæä¾›ä¸‰ä¸ªä¼˜åŒ–é•œåƒï¼š

- **jimwong8/download-cluster:downloader-optimized** (60MB)
- **jimwong8/download-cluster:resolver-optimized** (70MB)  
- **jimwong8/download-cluster:scraper-optimized** (80MB)

### ä¸€é”®éƒ¨ç½²
```bash
# æ‹‰å–å¹¶å¯åŠ¨æ‰€æœ‰æœåŠ¡
docker-compose -f docker-compose.hub.yml up -d

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
docker-compose -f docker-compose.hub.yml ps
```

## ğŸ§ª APIä½¿ç”¨ç¤ºä¾‹

### çˆ¬è™«æœåŠ¡ (URLè§£æ)

```bash
# è§£æé‡å®šå‘URL
curl -X POST http://localhost:8501/scrape \
  -H "Content-Type: application/json" \
  -d '{"url":"https://httpbin.org/redirect/1"}'

# å“åº”
{
  "real_url": "https://httpbin.org/get",
  "status": "success"
}
```

### ç®¡ç†ç•Œé¢ (ä»»åŠ¡åˆ†é…)

```bash
# æŸ¥çœ‹ä»£ç†çŠ¶æ€
curl http://localhost:8001/

# åˆ†é…ä¸‹è½½ä»»åŠ¡
curl -X POST http://localhost:8001/assign \
  -H "Content-Type: application/json" \
  -d '{"name":"agent01","url":"https://example.com/file.zip"}'
```

## âš¡ æ€§èƒ½å¯¹æ¯”

| æŒ‡æ ‡ | åŸç‰ˆæœ¬ | ä¼˜åŒ–ç‰ˆæœ¬ | æ”¹è¿› |
|------|--------|----------|------|
| **é•œåƒä¸‹è½½æ—¶é—´** | ~15åˆ†é’Ÿ | ~2åˆ†é’Ÿ | **7.5x** æ›´å¿« |
| **å®¹å™¨å¯åŠ¨æ—¶é—´** | ~30ç§’ | ~5ç§’ | **6x** æ›´å¿« |
| **ç£ç›˜å ç”¨** | 5.2GB | 212MB | **24x** æ›´å°‘ |
| **å†…å­˜ä½¿ç”¨** | ~800MB | ~200MB | **4x** æ›´å°‘ |

## ğŸ›¡ï¸ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **IDEå¯¼å…¥è­¦å‘Š**
   ```bash
   # è¿è¡Œå¼€å‘ç¯å¢ƒè®¾ç½®
   ./setup-dev.sh
   ```

2. **å®¹å™¨å¯åŠ¨å¤±è´¥**
   ```bash
   # æ£€æŸ¥ç«¯å£å ç”¨
   ./switch-version.sh status
   
   # é‡æ–°å¯åŠ¨
   ./switch-version.sh stop
   ./switch-version.sh optimized
   ```

3. **æƒé™é—®é¢˜**
   ```bash
   # ä¿®å¤è„šæœ¬æƒé™
   chmod +x *.sh
   ```

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. **Fork** æœ¬é¡¹ç›®
2. **åˆ›å»º** åŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. **æäº¤** æ›´æ”¹ (`git commit -m 'Add AmazingFeature'`)
4. **æ¨é€** åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. **æ‰“å¼€** Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…

## ğŸ™ è‡´è°¢

- **Docker** - å®¹å™¨åŒ–æŠ€æœ¯
- **Alpine Linux** - å®‰å…¨è½»é‡çš„åŸºç¡€é•œåƒ
- **Python** - ä¼˜é›…çš„ç¼–ç¨‹è¯­è¨€
- **Flask** - è½»é‡çº§Webæ¡†æ¶

---

**ğŸ‰ äº«å—æ‚¨çš„è¶…ä¼˜åŒ–åˆ†å¸ƒå¼ä¸‹è½½é›†ç¾¤ï¼**

*å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·åˆ›å»º Issue æˆ–è”ç³»ç»´æŠ¤è€…ã€‚*
